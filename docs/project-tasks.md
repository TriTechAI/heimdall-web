# Heimdall Web 项目开发任务清单

> 本文档包含项目所有模块的详细任务分解，预计总工期：3周（15个工作日）

## 📊 任务概览

| 阶段 | 模块 | 预计工时 | 优先级 |
|------|------|----------|---------|
| Phase 1 | 项目初始化与基础架构 | 1天 | P0 |
| Phase 1 | 认证系统 | 2天 | P0 |
| Phase 1 | 文章管理（核心） | 3天 | P0 |
| Phase 1 | 基础布局 | 1天 | P0 |
| Phase 2 | 标签管理 | 1天 | P1 |
| Phase 2 | 评论管理 | 1.5天 | P1 |
| Phase 2 | 用户管理 | 1.5天 | P1 |
| Phase 3 | 性能优化 | 1天 | P2 |
| Phase 3 | 测试完善 | 2天 | P1 |
| Phase 3 | 部署上线 | 1天 | P0 |

---

## Phase 1: 核心功能开发（第1周）

### 1. 项目初始化与基础架构 【1天】

#### 1.1 项目搭建 (2h)
- [ ] 使用 Next.js 14 创建项目
- [ ] 配置 TypeScript
- [ ] 安装核心依赖包
- [ ] 配置 ESLint 和 Prettier
- [ ] 设置 Git 仓库和 .gitignore

#### 1.2 基础配置 (2h)
- [ ] 创建 `tsconfig.json` 配置
- [ ] 创建 `.eslintrc.json` 配置
- [ ] 创建 `.prettierrc` 配置
- [ ] 配置路径别名 (@/*)
- [ ] 设置环境变量文件 (.env.local)

#### 1.3 目录结构搭建 (2h)
- [ ] 创建标准目录结构
- [ ] 设置 App Router 基础路由
- [ ] 创建全局样式文件
- [ ] 配置 Ant Design 主题
- [ ] 创建类型定义文件结构

#### 1.4 工具类设置 (2h)
- [ ] 创建 API 客户端基础代码
- [ ] 设置 axios 拦截器
- [ ] 创建通用工具函数
- [ ] 设置常量文件
- [ ] 创建错误处理机制

### 2. 认证系统 【2天】

#### 2.1 登录页面 (4h)
- [ ] 创建登录页面布局
- [ ] 实现登录表单（用户名/密码）
- [ ] 添加表单验证
- [ ] 实现记住登录功能
- [ ] 添加登录动画和反馈

#### 2.2 认证逻辑 (4h)
- [ ] 实现登录 API 调用
- [ ] Token 存储和管理
- [ ] 实现自动刷新 Token
- [ ] 创建 useAuth Hook
- [ ] 实现登出功能

#### 2.3 路由保护 (4h)
- [ ] 创建认证中间件
- [ ] 实现路由守卫
- [ ] 处理未授权访问
- [ ] 实现自动跳转逻辑
- [ ] 添加 Loading 状态

#### 2.4 用户状态管理 (4h)
- [ ] 创建用户 Context
- [ ] 实现用户信息获取
- [ ] 持久化用户状态
- [ ] 处理认证错误
- [ ] 实现权限检查

### 3. 文章管理模块（核心）【3天】

#### 3.1 文章列表页 (4h)
- [ ] 创建文章列表页面
- [ ] 实现表格组件（使用 Ant Table）
- [ ] 添加分页功能
- [ ] 实现搜索功能
- [ ] 添加状态筛选

#### 3.2 文章 API 集成 (4h)
- [ ] 创建文章相关 API endpoints
- [ ] 实现 usePostList Hook
- [ ] 添加加载和错误状态
- [ ] 实现刷新功能
- [ ] 处理空数据状态

#### 3.3 Markdown 编辑器集成 (6h)
- [ ] 集成 @uiw/react-md-editor
- [ ] 配置编辑器功能
- [ ] 实现实时预览
- [ ] 添加工具栏定制
- [ ] 实现快捷键支持

#### 3.4 图片上传功能 (4h)
- [ ] 实现拖拽上传
- [ ] 实现粘贴上传
- [ ] 添加上传进度显示
- [ ] 处理上传错误
- [ ] 实现图片预览

#### 3.5 创建/编辑文章 (6h)
- [ ] 创建文章表单页面
- [ ] 实现表单验证
- [ ] 添加自动保存草稿
- [ ] 实现发布/草稿切换
- [ ] 添加返回确认提示

### 4. 基础布局 【1天】

#### 4.1 管理后台布局 (4h)
- [ ] 创建 AdminLayout 组件
- [ ] 实现侧边栏导航
- [ ] 添加顶部 Header
- [ ] 实现响应式布局
- [ ] 添加面包屑导航

#### 4.2 通用组件 (4h)
- [ ] 创建 Loading 组件
- [ ] 创建 ErrorBoundary
- [ ] 创建 Empty 状态组件
- [ ] 创建确认对话框组件
- [ ] 创建通知提示组件

---

## Phase 2: 扩展功能开发（第2周）

### 5. 标签管理 【1天】

#### 5.1 标签列表 (4h)
- [ ] 创建标签管理页面
- [ ] 实现标签表格
- [ ] 添加创建标签功能
- [ ] 实现编辑功能
- [ ] 添加删除确认

#### 5.2 标签 API 集成 (4h)
- [ ] 创建标签 API endpoints
- [ ] 实现 useTagList Hook
- [ ] 实现创建/更新/删除
- [ ] 处理错误状态
- [ ] 添加成功提示

### 6. 评论管理 【1.5天】

#### 6.1 评论列表 (4h)
- [ ] 创建评论管理页面
- [ ] 实现评论表格展示
- [ ] 添加状态筛选
- [ ] 实现搜索功能
- [ ] 显示评论详情

#### 6.2 评论审核 (4h)
- [ ] 实现批量选择
- [ ] 添加批准/拒绝功能
- [ ] 实现标记垃圾评论
- [ ] 添加批量操作
- [ ] 实现操作确认

#### 6.3 评论 API 集成 (4h)
- [ ] 创建评论 API endpoints
- [ ] 实现 useCommentList Hook
- [ ] 实现审核操作 API
- [ ] 处理批量操作
- [ ] 添加实时更新

### 7. 用户管理 【1.5天】

#### 7.1 用户列表 (4h)
- [ ] 创建用户管理页面
- [ ] 实现用户表格
- [ ] 添加角色筛选
- [ ] 实现搜索功能
- [ ] 显示用户详情

#### 7.2 用户操作 (4h)
- [ ] 实现创建用户
- [ ] 添加编辑功能
- [ ] 实现重置密码
- [ ] 添加锁定/解锁
- [ ] 实现角色修改

#### 7.3 用户 API 集成 (4h)
- [ ] 创建用户 API endpoints
- [ ] 实现 useUserList Hook
- [ ] 实现用户操作 API
- [ ] 处理权限验证
- [ ] 添加操作日志

---

## Phase 3: 优化与部署（第3周）

### 8. 性能优化 【1天】

#### 8.1 代码优化 (4h)
- [ ] 实现组件懒加载
- [ ] 添加 React.memo 优化
- [ ] 优化重渲染问题
- [ ] 实现虚拟滚动（长列表）
- [ ] 代码分割优化

#### 8.2 资源优化 (4h)
- [ ] 图片懒加载实现
- [ ] 优化打包体积
- [ ] 实现缓存策略
- [ ] 优化 API 请求
- [ ] 添加性能监控

### 9. 测试完善 【2天】

#### 9.1 单元测试 (8h)
- [ ] 工具函数测试
- [ ] Hook 测试
- [ ] API 客户端测试
- [ ] 组件单元测试
- [ ] 测试覆盖率检查

#### 9.2 集成测试 (4h)
- [ ] 登录流程测试
- [ ] 文章 CRUD 测试
- [ ] 权限验证测试
- [ ] 错误处理测试
- [ ] 边界情况测试

#### 9.3 用户体验测试 (4h)
- [ ] 响应式布局测试
- [ ] 浏览器兼容性
- [ ] 性能测试
- [ ] 可访问性检查
- [ ] 用户流程验证

### 10. 部署上线 【1天】

#### 10.1 部署准备 (4h)
- [ ] 环境变量配置
- [ ] 构建脚本优化
- [ ] 生产环境配置
- [ ] 安全检查
- [ ] 文档更新

#### 10.2 部署实施 (4h)
- [ ] Vercel 部署配置
- [ ] 域名配置
- [ ] SSL 证书设置
- [ ] 监控设置
- [ ] 备份方案

---

## 📋 技术债务和后续优化

### 待优化项（上线后）
1. **功能增强**
   - [ ] 富文本编辑器增强（表格编辑器、流程图）
   - [ ] 媒体库管理
   - [ ] 数据统计仪表盘
   - [ ] 多语言支持
   - [ ] 主题切换（暗色模式）

2. **性能优化**
   - [ ] SSG/ISR 优化
   - [ ] Service Worker 缓存
   - [ ] WebSocket 实时通信
   - [ ] 图片 CDN 集成

3. **开发体验**
   - [ ] Storybook 组件文档
   - [ ] E2E 测试（Playwright）
   - [ ] CI/CD 完善
   - [ ] 自动化部署

---

## 🚀 开发建议

### 每日工作流程
1. **早上**: 查看任务清单，更新进度
2. **开发中**: 完成一个任务就打勾
3. **提交前**: 运行 lint 和测试
4. **晚上**: 更新任务进度，记录问题

### 关键里程碑
- **Day 3**: 完成认证系统，可以登录
- **Day 7**: 完成核心功能，文章 CRUD 可用
- **Day 10**: 完成所有功能模块
- **Day 13**: 完成测试和优化
- **Day 15**: 成功部署上线

### 风险管理
1. **API 延迟**: 使用 Mock 数据先行开发
2. **依赖问题**: 提前测试所有核心依赖
3. **性能问题**: 边开发边优化，不要最后才处理
4. **部署问题**: 提前准备部署环境

---

## ✅ 验收标准

### 功能验收
- [ ] 所有 CRUD 操作正常
- [ ] Markdown 编辑器功能完整
- [ ] 认证和权限正常工作
- [ ] 响应式布局正常
- [ ] 错误处理完善

### 性能验收
- [ ] 首页加载 < 3秒
- [ ] 列表页响应 < 1秒
- [ ] 编辑器无卡顿
- [ ] 图片上传流畅

### 质量验收
- [ ] 无 TypeScript 错误
- [ ] ESLint 检查通过
- [ ] 核心功能有测试覆盖
- [ ] 代码规范符合标准

---

## 📝 备注

1. 优先级说明：
   - P0: 必须完成，阻塞其他功能
   - P1: 应该完成，影响用户体验
   - P2: 可以延后，不影响上线

2. 时间估算包含：
   - 开发时间
   - 自测时间
   - 代码优化
   - 文档编写

3. 可并行任务：
   - 不同模块可以并行开发
   - UI 和 API 可以并行
   - 测试可以边开发边写

4. 依赖关系：
   - 认证系统必须最先完成
   - 基础布局影响所有页面
   - API 客户端是所有模块基础